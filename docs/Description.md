# Описание системы
## Введение
Данная система представляет собой комплекс, состоящий из трёх сервисов, взаимодействующих с 2-3 базами данных. Состав системы: 
- Router - сервис, предназначенный для маршрутизации запросов пользователя между различными экземплярами taskService и stateService. Кроме того, он предоставляет taskService адреса stateService для получения статусов выполнения заданий
- TaskService - сервис, роль которого - передача клиенту зписка заданий и статусов выполненности заданий, полученных от stateService
- StateService - сервис, задачей которого является добавление записей об изменении статуса задания, а также предоставление этих статусов
Кроме того, что относится к бэкенду, были разработаны стратический макет страницы, скрипт для её реактивного заполнения, а также файл стилей в качестве фронтенда для удобного тестирования работы сервера.
## Используемые технологии
Разработка серверной части приложения велась с помощью Node.js. Данный выбор даёт высокую скорость работы приложению, несмотря на однопоточность Node.js. При этом существуют способы запуска нескольких экземпляров одного приложения на одном порту, что сделает приложение ещё быстрее.</br>
Для франения информации о заданиях были выбраны реляционные СУБД, в частности MySQL. Не смотря на то, что документарные базы часто быстрее и проще в масштабировнии, выявленная структура БД имеет чисто табличный вид. Кроме того, при работе с БД была выявлена необходимость использования оператора соединения (JOIN), который отсутствуе в нереляционных СУБД. Созданный сервер может вести работу как с одной, так и с двумя отдельными базами данных.</br>
Кроме MySQL на сервере используется хранилище Redis для хранения сессий клиентов. Таким образом, все сессии хранятся в едином очень быстром хранилище.</br>
На клиентской стороне была создана простейшая страница на HTML, разработан дизайн различных элементов, появляющихся на странице в помощью  CSS.</br>
Основной частью фронтенда является крупный скрипт, созданный с помощью Vue.js. Этот скрипт позволяет использовать только одну страницу для ситуационного отображения объектов, необходимых в конкретный момент.Таким образом, это минимизирует нагрузку на router, ведь ему надо будет для каждого клиента передать определённый набор файлов и два адреса. После этого взаимодействие пользователя с router'ом полностью заканчивается. Это позволяет сильно увеличить скорость ответа маршрутизатора и, как следствие, количество обслуживаемых клиентов за единцу времени.
## Инструкция по запуску
### Необходимое ПО
Созданная система является полностью кроссплатформенной. Все нобходимые компоненты могут быть настроены и запущены на любой операционной системе.</br>
Важно, что Redis официально не поддерживается для Windows, но при этом официальная страница Redis labs даёт ссылку на [репозиторий](https://github.com/dmajkic/redis/downloads), где можно скачать Redis под Windows. Кроме того, в Windows 10 возможна установка компонента Подсистема Windows для Linux, который позволяет запускать оболочку Linux в пользовательском интерфейсе Windows.</br>
Для корректной работы сервиса необходимо установить MySQL Server. На [официальном сайте](https://dev.mysql.com/downloads/) можно также найти все инструкции по установке MySQL.</br>
Для установки Node.js необходимо перейти на [официальный сайт](https://nodejs.org/en/download/) и скачать подходящую сборку.

## Система взаимодействия с сервисами
Основной функционал сервисов заключается во взаимодействии с клиентом с помощью API на основе протокола удалённого вызова функций JSON RPC 2.0. Данный протокол реализован в системе не в полной мере и с определёнными отступлениями от спецификации 2.0. Во-первых, данной системе не требуются batch-запросы, что избавляет от определения уникальных id запросов. Из-за этого во всех запросах это поле по умолчанию заполнено нулями. Во-вторых, параметры передаются в виде объекта, а не массивом. Данный шаг был произведён для увеличения понятноси API. Последнее отличие от спецификации - это передача некоторых ошибок не специальном поле error, а в поле result. В этих случаях ответ ERROR является именно результатом работы функции, а не ошибкой. Более подробно о структуре запросов, ответов и функционале в целом можно узнать в [описании API](API%20documentation.md).
