{"code":"var app=function(e){var t={};function a(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=0)}([function(e,t,a){var s,n=axios.create({url:\"/\",headers:{\"content-type\":\"application/json\",accept:\"application/json\"}}),i=a(1);new Vue({el:\"#app\",template:'<div><div id=\"header\"><h3>Rocketman</h3></div><component v-bind:is=\"currentPage.component\" @delete-task=\"deleteTask\" @change-page=\"changePage\" :data=\"tasks\"/></div>',data:{pages:i,currentPage:i[\"login-page\"],tasks:[]},created:function(){n.post(\"\",{jsonrpc:\"2.0\",method:\"getHost\",params:{count:2},id:0}).then(e=>{s=axios.create({baseURL:\"http://\"+e.data.result.host[1],headers:{\"content-type\":\"application/json\",accept:\"application/json\"},withCredentials:!0}),axios.create({baseURL:\"http://\"+e.data.result.host[0],headers:{\"content-type\":\"application/json\",accept:\"application/json\"},withCredentials:!0})})},methods:{changePage:function(e){if(\"ToMainPage\"===e.name){this.currentPage=this.pages[\"main-page\"];let t={jsonrpc:\"2.0\",method:\"getTasks\",params:{archived:e.archived,filter:e.filter},id:0};s.post(\"\",t).then(e=>{this.tasks=e.data.result.tasks,this.tasks.forEach((t,a,s)=>{t.creation_date=new Date(t.creation_date).toLocaleString().slice(0,10),t.change_date=new Date(e.data.result.states[a].change_date).toLocaleString().slice(0,10),t.state=0===e.data.result.states[a].state?\"Не выполнено\":\"Выполнено\",console.log(t)})})}else\"CreateTask\"===e.name?this.currentPage=this.pages[\"new-task\"]:\"LogInPage\"===e.name?this.currentPage=this.pages[\"login-page\"]:\"SignUpPage\"===e.name&&(this.currentPage=this.pages[\"signup-page\"]);console.log(e)},deleteTask:function(e){this.tasks.forEach((t,a,s)=>{t.task_id===e&&this.tasks.splice(a,1)})}}})},function(e,t,a){const s=a(2),n=a(3),i=a(4),o=a(5);e.exports={\"login-page\":n,\"signup-page\":i,\"main-page\":s,\"new-task\":o}},function(e,t){e.exports={component:{props:[\"data\"],data:function(){return{fileredTasks:[],archived:!1}},components:{\"task-filter\":filter.component,\"task-table\":taskTable.component},template:'<div><button @click=\"createTask\">Создать</button><button @click=\"showActive\" v-if=\"archived\">Активные</button><button @click=\"showArchived\" v-else>Архив</button><task-filter @apply=\"filterTasks\" :tasks=\"data\" /><task-table :tasks=\"data\" @delete-task=\"deleteTask\" /></div>',methods:{filterTasks:function(e){console.log(\"sdsds\")},createTask:function(){this.$emit(\"change-page\",{name:\"CreateTask\"})},showActive:function(){this.archived=!1,this.$emit(\"change-page\",{name:\"ToMainPage\",archived:0})},showArchived:function(){this.archived=!0,this.$emit(\"change-page\",{name:\"ToMainPage\",archived:1})},filterTasks:function(e){this.$emit(\"change-page\",{name:\"ToMainPage\",archived:this.archived,filter:e})},deleteTask:function(e){this.$emit(\"delete-task\",e)}}}}},function(e,t){e.exports={component:{data:function(){return{error:\"\",login:\"\",password:\"\"}},template:'<div class=\"login-form\"><div>Вход</div><div class=\"error-message\">{{ error }}</div><div class=\"form-field\"><label class=\"lable\">Логин</label><input class=\"login-field\" type=\"text\" name=\"login\" v-model=\"login\" /></div><div class=\"form-field\"><label class=\"lable\">Пароль</label><input class=\"pass-field\" type=\"password\" name=\"password\" v-model=\"password\" /></div><input type=\"submit\" value=\"Войти\" @click=\"authorize\" /><button @click=\"signUp\">Зарегистрироваться</button></div>',methods:{authorize:function(){this.error=\"\";let e={jsonrpc:\"2.0\",method:\"logIn\",params:{login:this.login,needSalt:!0},id:0};taskServ.post(\"\",e).then(e=>{if(200===e.status&&null!=e.data.result)if(null!=e.data.result.salt){let a=dcodeIO.bcrypt;var t=a.hashSync(this.password,e.data.result.salt);t=a.hashSync(t,10);let s={jsonrpc:\"2.0\",method:\"logIn\",params:{login:this.login,password:t},id:0};taskServ.post(\"\",s).then(e=>{if(null!=e.data.result&&e.data.result.authorized){let e={name:\"ToMainPage\",archived:0};this.$emit(\"change-page\",e)}})}else this.error=\"Введены неверные данные\"})},signUp:function(){this.$emit(\"change-page\",{name:\"SignUpPage\"})}}}}},function(e,t){e.exports={component:{data:function(){return{error:\"\",login:\"\",password:\"\"}},template:'<div class=\"login-form\"><div class=\"error-message\">{{ error }}</div><div class=\"form-field\"><label title=\"Логин должен содержать не менее 6 символов без спецсимволоов\" class=\"lable\">Логин</label><input title=\"Логин должен содержать не менее 6 символов без спецсимволоов\" class=\"login-field\" type=\"text\" name=\"login\" v-model=\"login\" /></div><div class=\"form-field\"><label title=\"Пароль должен содержать не менее 6 символов\" class=\"lable\">Пароль</label><input title=\"Пароль должен содержать не менее 6 символов\" class=\"pass-field\" type=\"password\" name=\"password\" v-model=\"password\" /></div><input type=\"submit\" value=\"Зарегистрироваться\" @click=\"registrate\" /><button @click=\"logIn\">Войти</button></div>',methods:{registrate:function(){if(this.error=\"\",this.login.length<6)return this.error=\"Логин не может быть короче 6 символов\",1;if(this.password.length<6)return this.error=\"Пароль не может быть короче 6 символов\",1;let e={jsonrpc:\"2.0\",method:\"signUp\",params:{login:this.login,password:this.password},id:0};taskServ.post(\"\",e).then(e=>{if(200===e.status&&null!=e.data.result)if(\"OK\"===e.data.result.status){let e={name:\"LogInPage\"};this.$emit(\"change-page\",e)}else\"NOT_UNIQUE\"===e.data.result.status?this.error=\"Пользователь с таким именем уже существует\":this.error=\"В логине используются спецсимволы\"})},logIn:function(){this.$emit(\"change-page\",{name:\"LogInPage\"})}}}}},function(e,t){e.exports={component:{data:function(){return{name:\"\",description:\"\",error:\"\"}},template:'<div><h2>Создать задание</h2><div><label>Название</label><input type=\"text\" name=\"name\" v-model=\"name\" /></div><div>{{ error }}</div><div><label>Описание</label><input type=\"text\" name=\"description\" v-model=\"description\" maxlenght=\"999\" /></div><button @click=\"emptyCheck\">Создать</button><button @click=\"back\">Назад</button></div>',methods:{back:function(){this.$emit(\"change-page\",{name:\"ToMainPage\",archived:0})},emptyCheck:function(){\"\"===this.name?this.error=\"Название не может быть пустым\":this.create()},create:function(){var e=new Date;let t={jsonrpc:\"2.0\",method:\"isExist\",params:{name:this.name,date:e.getFullYear()+\"-\"+(e.getMonth()+1)+\"-\"+e.getDate()},id:0};taskServ.post(\"\",t).then(t=>{if(\"OK\"===t.data.result.status){let t={jsonrpc:\"2.0\",method:\"createTask\",params:{name:this.name,description:this.description,date:e.getFullYear()+\"-\"+(e.getMonth()+1)+\"-\"+e.getDate()},id:0};taskServ.post(\"\",t).then(t=>{if(0!=t.data.result.id){let a={jsonrpc:\"2.0\",method:\"updateState\",params:{taskId:t.data.result.id,state:0,date:e.getFullYear()+\"-\"+(e.getMonth()+1)+\"-\"+e.getDate()},id:0};stateServ.post(\"\",a).then(e=>{null!=e.data.result.status&&this.$emit(\"change-page\",{name:\"ToMainPage\",archived:0})})}})}else this.error=\"Сегодня уже была создана задача с таким именем\"})}}}}}]);","extractedComments":[]}